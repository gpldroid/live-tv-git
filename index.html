<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مشغل القنوات TV</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-tv"></i> مشغل القنوات TV</h1>
            <p class="subtitle">استمتع بمشاهدة أفضل القنوات العربية والدولية</p>
        </header>

        <div class="main-content">
            <div class="video-container">
                <div class="video-wrapper">
                    <video id="videoPlayer" controls>
                        <source src="" type="video/mp4">
                        متصفحك لا يدعم تشغيل الفيديو.
                    </video>
                </div>
                <div class="video-info">
                    <h2 id="currentChannel">اختر قناة للمشاهدة</h2>
                    <div class="controls">
                        <button id="playPauseBtn" class="control-btn">
                            <i class="fas fa-play"></i> تشغيل
                        </button>
                        <button id="muteBtn" class="control-btn">
                            <i class="fas fa-volume-up"></i> كتم
                        </button>
                        <button id="fullscreenBtn" class="control-btn">
                            <i class="fas fa-expand"></i> ملء الشاشة
                        </button>
                        <div class="volume-control">
                            <i class="fas fa-volume-down"></i>
                            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1">
                            <i class="fas fa-volume-up"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="channels-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ابحث عن قناة...">
                    <i class="fas fa-search"></i>
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">الكل</button>
                    <button class="filter-btn" data-category="sports">رياضة</button>
                    <button class="filter-btn" data-category="movies">أفلام</button>
                    <button class="filter-btn" data-category="news">أخبار</button>
                    <button class="filter-btn" data-category="kids">أطفال</button>
                    <button class="filter-btn" data-category="general">عامة</button>
                </div>
                
                <div class="channels-list" id="channelsList">
                    <!-- سيتم ملؤها بواسطة الجافاسكريبت -->
                </div>
            </div>
        </div>

        <footer>
            <p>© 2023 مشغل القنوات TV - جميع الحقوق محفوظة</p>
            <p class="disclaimer">هذا المشروع لأغراض تعليمية فقط</p>
        </footer>
    </div>

    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>جاري تحميل القنوات...</p>
    </div>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Cairo', sans-serif;
}

body {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    color: #fff;
    min-height: 100vh;
    direction: rtl;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
}

header {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    color: #4cc9f0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.subtitle {
    font-size: 1.1rem;
    color: #b0b0b0;
}

.main-content {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    margin-bottom: 30px;
}

.video-container {
    flex: 3;
    min-width: 300px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.video-wrapper {
    width: 100%;
    background: #000;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 20px;
}

video {
    width: 100%;
    height: auto;
    max-height: 500px;
    display: block;
}

.video-info h2 {
    margin-bottom: 20px;
    color: #fff;
    font-size: 1.8rem;
}

.controls {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: center;
}

.control-btn {
    background: #4361ee;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
}

.control-btn:hover {
    background: #3a56d4;
    transform: translateY(-2px);
}

.volume-control {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 15px;
    border-radius: 8px;
}

.volume-control input {
    width: 100px;
}

.channels-container {
    flex: 2;
    min-width: 300px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.search-box {
    position: relative;
    margin-bottom: 20px;
}

.search-box input {
    width: 100%;
    padding: 12px 45px 12px 15px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 1rem;
}

.search-box input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(255, 255, 255, 0.5);
}

.filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}

.filter-btn {
    padding: 8px 15px;
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

.filter-btn.active {
    background: #4361ee;
    border-color: #4361ee;
}

.channels-list {
    max-height: 500px;
    overflow-y: auto;
    padding-right: 10px;
}

.channel-item {
    padding: 15px;
    margin-bottom: 10px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid transparent;
}

.channel-item:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateX(-5px);
}

.channel-item.active {
    background: rgba(67, 97, 238, 0.2);
    border-color: #4361ee;
}

.channel-name {
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 5px;
    color: #fff;
}

.channel-category {
    font-size: 0.9rem;
    color: #4cc9f0;
    display: inline-block;
    padding: 3px 10px;
    background: rgba(76, 201, 240, 0.1);
    border-radius: 20px;
}

.channels-list::-webkit-scrollbar {
    width: 8px;
}

.channels-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
}

.channels-list::-webkit-scrollbar-thumb {
    background: #4361ee;
    border-radius: 10px;
}

footer {
    text-align: center;
    padding: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    margin-top: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

footer p {
    margin-bottom: 5px;
    color: #b0b0b0;
}

.disclaimer {
    font-size: 0.9rem;
    color: #888;
}

.loading {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.spinner {
    width: 60px;
    height: 60px;
    border: 5px solid rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    border-top-color: #4361ee;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    100% {
        transform: rotate(360deg);
    }
}

@media (max-width: 1100px) {
    .main-content {
        flex-direction: column;
    }
    
    .video-container, .channels-container {
        width: 100%;
    }
    
    header h1 {
        font-size: 2rem;
    }
}

@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    
    header h1 {
        font-size: 1.8rem;
    }
    
    .controls {
        justify-content: center;
    }
    
    .filter-buttons {
        justify-content: center;
    }
}

</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // عناصر DOM
    const videoPlayer = document.getElementById('videoPlayer');
    const currentChannel = document.getElementById('currentChannel');
    const channelsList = document.getElementById('channelsList');
    const searchInput = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const muteBtn = document.getElementById('muteBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const loading = document.getElementById('loading');
    
    // متغيرات التطبيق
    let channels = [];
    let filteredChannels = [];
    let currentCategory = 'all';
    let searchQuery = '';
    
    // بيانات القنوات من M3U
    const m3uContent = `#EXTM3U
#EXTINF:-1 tvg-id="AlArabyTV2.qa@SD" tvg-logo="https://i.imgur.com/Gp5mNea.png" group-title="News",Alaraby 2 TV (1080p)
https://alaraby.cdn.octivid.com/alaraby2n/smil:alaraby2n.stream.smil/chunklist.m3u8
#EXTINF:-1 tvg-id="AlArabyTV.qa@SD" tvg-logo="https://i.imgur.com/YMqWEe4.png" group-title="News",Alaraby TV (1080p)
https://alaraby.cdn.octivid.com/alaraby/smil:alaraby.stream.smil/chunklist.m3u8
#EXTINF:-1 tvg-id="AlJazeera.qa@Arabic" tvg-logo="https://i.imgur.com/7bRVpnu.png" group-title="News",Al Jazeera (1080p)
https://live-hls-apps-aja-fa.getaj.net/AJA/index.m3u8
#EXTINF:-1 tvg-id="AlJazeera.qa@English" tvg-logo="https://i.imgur.com/7bRVpnu.png" group-title="News",Al Jazeera English (1080p)
https://live-hls-apps-aje-fa.getaj.net/AJE/index.m3u8
#EXTINF:-1 tvg-id="AlJazeeraDocumentary.qa@SD" tvg-logo="https://i.imgur.com/5dNJlLo.png" group-title="Documentary",Al Jazeera Documentary (1080p)
https://live-hls-apps-ajd-fa.getaj.net/AJD/index.m3u8
#EXTINF:-1 tvg-id="AlJazeeraMubasher24.qa@SD" tvg-logo="https://i.imgur.com/LMCcIZ2.png" group-title="News",Al Jazeera Mubasher 24 (1080p)
https://live-hls-apps-ajm24-fa.getaj.net/AJM24/index.m3u8
#EXTINF:-1 tvg-id="AlJazeeraMubasher.qa@SD" tvg-logo="https://i.imgur.com/X80DQvF.png" group-title="News",Al Jazeera Mubasher (1080p)
https://live-hls-apps-ajm-fa.getaj.net/AJM/index.m3u8
#EXTINF:-1 tvg-id="AlJazeeraMubasherBroadcast2.qa@SD" tvg-logo="https://i.imgur.com/nJmi6G6.png" group-title="News",Al Jazeera Mubasher Broadcast 2 (1080p)
https://live-hls-apps-ajm2-fa.getaj.net/AJM2/index.m3u8
#EXTINF:-1 tvg-id="AlkassFour.qa@HD" tvg-logo="https://i.imgur.com/iDL65Wu.png" group-title="Sports",Alkass Four HD (720p)
https://streamer3.qna.org.qa/148164621_live/148164621_296.sdp/playlist.m3u8
#EXTINF:-1 tvg-id="AlkassThree.qa@SD" tvg-logo="https://i.imgur.com/d57BdFh.png" group-title="Sports",Alkass Three (720p)
https://streamer2.qna.org.qa/148161470_live/148161470_296.sdp/playlist.m3u8
#EXTINF:-1 tvg-id="AlkassTwo.qa@SD" tvg-logo="https://i.imgur.com/8w61kFX.png" group-title="Sports",Alkass Two (720p)
https://streamer3.qna.org.qa/148164528_live/148164528_296.sdp/playlist.m3u8
#EXTINF:-1 tvg-id="AlMaarefTV.qa@SD" tvg-logo="https://i.imgur.com/QFnztgo.png" group-title="Religious",Al Maaref (350p)
https://672a3a5c8e335.streamlock.net/AlMaaref/smil:almaareflive.smil/playlist.m3u8
#EXTINF:-1 tvg-id="AlRayyanOldTV.qa@SD" tvg-logo="https://i.imgur.com/4qB5iN0.png" group-title="General",Al Rayyan Al Qadeem (1080p)
https://alrayyancdn.vidgyor.com/pub-nooldraybinbdh/liveabr/playlist_dvr.m3u8
#EXTINF:-1 tvg-id="AlRayyanTV.qa@SD" tvg-logo="https://i.imgur.com/Ts3RjTV.png" group-title="General",Al Rayyan (1080p)
https://alrayyancdn.vidgyor.com/pub-noalrayy3pwz0l/liveabr/playlist_dvr.m3u8
#EXTINF:-1 tvg-id="QatarTelevision2.qa@SD" tvg-logo="https://i.imgur.com/iWJxDUm.png" group-title="General",Qatar Television 2 (1080p)
https://live.kwikmotion.com/qtv2live/qtv2.smil/playlist.m3u8
#EXTINF:-1 tvg-id="QatarTelevision.qa@SD" tvg-logo="https://i.imgur.com/N5RB4sp.png" group-title="General",Qatar Television (1080p)
https://live.kwikmotion.com/qtv1live/qtv1.smil/playlist.m3u8
`;
    
    // تحليل محتوى M3U
    function parseM3U(content) {
        const lines = content.split('\n');
        const channels = [];
        
        for (let i = 0; i < lines.length; i++) {
            if (lines[i].startsWith('#EXTINF')) {
                const channel = {};
                
                // استخراج اسم القناة
                const nameMatch = lines[i].match(/,(.+)$/);
                if (nameMatch) {
                    channel.name = nameMatch[1].trim();
                } else {
                    channel.name = 'قناة بدون اسم';
                }
                
                // استخراج الرابط
                if (i + 1 < lines.length && lines[i + 1].startsWith('http')) {
                    channel.url = lines[i + 1].trim();
                    i++; // تخطي سطر الرابط
                }
                
                // تحديد الفئة بناءً على الاسم
                channel.category = determineCategory(channel.name);
                
                if (channel.url) {
                    channels.push(channel);
                }
            }
        }
        
        return channels;
    }
    
    // تحديد فئة القناة بناءً على الاسم
    function determineCategory(name) {
        name = name.toLowerCase();
        
        if (name.includes('sport') || name.includes('رياضة') || name.includes('beinsport') || name.includes('eurosport')) {
            return 'sports';
        } else if (name.includes('movie') || name.includes('cinema') || name.includes('aflam') || name.includes('film') || name.includes('دراما') || name.includes('drama')) {
            return 'movies';
        } else if (name.includes('news') || name.includes('أخبار') || name.includes('bbc') || name.includes('aljazeera') || name.includes('الجزيرة') || name.includes('العربية')) {
            return 'news';
        } else if (name.includes('kids') || name.includes('child') || name.includes('أطفال') || name.includes('jeem') || name.includes('spacetoon') || name.includes('cartoon')) {
            return 'kids';
        } else {
            return 'general';
        }
    }
    
    // تحميل القنوات
    function loadChannels() {
        channels = parseM3U(m3uContent);
        filteredChannels = [...channels];
        renderChannels();
        
        // إخفاء شاشة التحميل بعد ثانيتين
        setTimeout(() => {
            loading.style.display = 'none';
            
            // تشغيل أول قناة تلقائياً
            if (channels.length > 0) {
                playChannel(channels[0]);
            }
        }, 2000);
    }
    
    // عرض القنوات في القائمة
    function renderChannels() {
        channelsList.innerHTML = '';
        
        if (filteredChannels.length === 0) {
            channelsList.innerHTML = '<div class="no-channels">لم يتم العثور على قنوات تطابق البحث</div>';
            return;
        }
        
        filteredChannels.forEach((channel, index) => {
            const channelItem = document.createElement('div');
            channelItem.className = 'channel-item';
            channelItem.dataset.index = index;
            
            channelItem.innerHTML = `
                <div class="channel-name">${channel.name}</div>
                <span class="channel-category">${getCategoryName(channel.category)}</span>
            `;
            
            channelItem.addEventListener('click', () => {
                playChannel(channel);
                updateActiveChannel(channelItem);
            });
            
            channelsList.appendChild(channelItem);
        });
    }
    
    // الحصول على اسم الفئة بالعربية
    function getCategoryName(category) {
        const categories = {
            'sports': 'رياضة',
            'movies': 'أفلام',
            'news': 'أخبار',
            'kids': 'أطفال',
            'general': 'عامة'
        };
        
        return categories[category] || 'عامة';
    }
    
    // تشغيل قناة
    function playChannel(channel) {
        currentChannel.textContent = channel.name;
        videoPlayer.src = channel.url;
        
        // محاولة تشغيل الفيديو
        videoPlayer.load();
        
        videoPlayer.onloadeddata = function() {
            videoPlayer.play().catch(e => {
                console.log('خطأ في التشغيل التلقائي:', e);
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i> تشغيل';
            });
            
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> إيقاف';
        };
        
        videoPlayer.onerror = function() {
            currentChannel.textContent = `${channel.name} - خطأ في تحميل القناة`;
            alert('عذراً، لا يمكن تشغيل هذه القناة حالياً. يرجى المحاولة لاحقاً أو اختيار قناة أخرى.');
        };
    }
    
    // تحديث القناة النشطة في القائمة
    function updateActiveChannel(activeItem) {
        document.querySelectorAll('.channel-item').forEach(item => {
            item.classList.remove('active');
        });
        
        activeItem.classList.add('active');
        
        // تمرير العنصر النشط إلى منتصف القائمة
        activeItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    
    // تصفية القنوات حسب الفئة
    function filterChannels(category) {
        currentCategory = category;
        
        if (category === 'all') {
            filteredChannels = [...channels];
        } else {
            filteredChannels = channels.filter(channel => channel.category === category);
        }
        
        // تطبيق البحث أيضاً
        if (searchQuery) {
            filteredChannels = filteredChannels.filter(channel => 
                channel.name.toLowerCase().includes(searchQuery.toLowerCase())
            );
        }
        
        renderChannels();
        
        // تحديث أزرار التصفية النشطة
        filterButtons.forEach(btn => {
            if (btn.dataset.category === category) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
    }
    
    // البحث عن قنوات
    function searchChannels(query) {
        searchQuery = query;
        
        if (!query.trim()) {
            filterChannels(currentCategory);
            return;
        }
        
        filteredChannels = channels.filter(channel => 
            channel.name.toLowerCase().includes(query.toLowerCase())
        );
        
        renderChannels();
    }
    
    // تهيئة عناصر التحكم بالمشغل
    function initPlayerControls() {
        // زر التشغيل/الإيقاف
        playPauseBtn.addEventListener('click', () => {
            if (videoPlayer.paused) {
                videoPlayer.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> إيقاف';
            } else {
                videoPlayer.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i> تشغيل';
            }
        });
        
        // تحديث زر التشغيل عند تغيير حالة الفيديو
        videoPlayer.addEventListener('play', () => {
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> إيقاف';
        });
        
        videoPlayer.addEventListener('pause', () => {
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i> تشغيل';
        });
        
        // زر كتم الصوت
        muteBtn.addEventListener('click', () => {
            videoPlayer.muted = !videoPlayer.muted;
            
            if (videoPlayer.muted) {
                muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i> إلغاء الكتم';
            } else {
                muteBtn.innerHTML = '<i class="fas fa-volume-up"></i> كتم';
            }
        });
        
        // زر ملء الشاشة
        fullscreenBtn.addEventListener('click', () => {
            const videoWrapper = document.querySelector('.video-wrapper');
            
            if (!document.fullscreenElement) {
                if (videoWrapper.requestFullscreen) {
                    videoWrapper.requestFullscreen();
                } else if (videoWrapper.webkitRequestFullscreen) {
                    videoWrapper.webkitRequestFullscreen();
                } else if (videoWrapper.msRequestFullscreen) {
                    videoWrapper.msRequestFullscreen();
                }
                
                fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i> تصغير';
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i> ملء الشاشة';
            }
        });
        
        // تحديث زر ملء الشاشة عند الخروج من وضع ملء الشاشة
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i> ملء الشاشة';
            }
        });
        
        // شريط التحكم في الصوت
        volumeSlider.addEventListener('input', () => {
            videoPlayer.volume = volumeSlider.value;
            
            // إلغاء الكتم إذا كان الصوت أعلى من 0
            if (videoPlayer.volume > 0 && videoPlayer.muted) {
                videoPlayer.muted = false;
                muteBtn.innerHTML = '<i class="fas fa-volume-up"></i> كتم';
            }
        });
    }
    
    // إعداد مستمعي الأحداث
    function setupEventListeners() {
        // البحث
        searchInput.addEventListener('input', (e) => {
            searchChannels(e.target.value);
        });
        
        // أزرار التصفية
        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterChannels(btn.dataset.category);
            });
        });
        
        // اختصارات لوحة المفاتيح
        document.addEventListener('keydown', (e) => {
            // المسافة للتحكم في التشغيل/الإيقاف
            if (e.code === 'Space' && e.target === document.body) {
                e.preventDefault();
                playPauseBtn.click();
            }
            
            // م للتحكم في الكتم
            if (e.code === 'KeyM' && e.target === document.body) {
                e.preventDefault();
                muteBtn.click();
            }
            
            // F للدخول إلى وضع ملء الشاشة
            if (e.code === 'KeyF' && e.target === document.body) {
                e.preventDefault();
                fullscreenBtn.click();
            }
        });
    }
    
    // تهيئة التطبيق
    function initApp() {
        loadChannels();
        initPlayerControls();
        setupEventListeners();
    }
    
    // بدء تشغيل التطبيق
    initApp();
});
</script>

</body>
</html>
